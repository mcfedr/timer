angular.module("timer",["ngAnimate","ngTouch","ngStorage","ui.router","ngFitText"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/play"),t.state("play",{url:"/play",templateUrl:"partials/play.html",controller:"play"}).state("settings",{url:"/settings",templateUrl:"partials/settings.html",controller:"settings"})}]),angular.module("timer").controller("play",["$scope","settings","$timeout",function(t,e,n){function s(){a&&n.cancel(a),a=n(l,10)}function l(){var s=moment(t.settings.endTime);s.isBefore()?(t.remainingTime="Finished!",i&&e.sound&&r.play()):(t.remainingTime=S(Math.floor(moment.duration(s.diff(moment())).as("minutes"))).padLeft(2,"0").s+":"+S(moment.duration(s.diff(moment())).get("seconds")).padLeft(2,"0").s+":"+S(moment.duration(s.diff(moment())).get("milliseconds")).padLeft(3,"0").s,a=n(l,10))}var a,i=!1,r=new buzz.sound("/images/alarm.mp3");t.settings=e,t.range=function(t){return new Array(t)},t.next=function(){t.start((t.settings.currentPlayer+1)%t.settings.players)},t.start=function(e){t.settings.currentPlayer=e,t.settings.endTime=moment().add("minutes",t.settings.length),i=!0,s()},t.silence=function(){r.stop()},t.settings.endTime&&s()}]),angular.module("timer").controller("settings",["$scope","settings",function(t,e){t.settings=e,t.range=function(t){return new Array(t)}}]),angular.module("timer").factory("settings",["$localStorage",function(t){return t.$default({length:3,players:6,names:[],currentPlayer:0,sound:!0})}]),function(t){try{t=angular.module("cast")}catch(e){t=angular.module("cast",[])}t.run(["$templateCache",function(t){t.put("partials/play.html",'<div class="btn-group btn-group-justified"><div class="btn-group" ng-repeat="x in range(settings.players) track by $index"><button type="button" class="btn btn-default" ng-class="{active: settings.currentPlayer == $index}" ng-click="start($index)">{{ settings.names[$index] || "Player " + ($index + 1) }}</button></div></div><div fittext="0.5" class="remainingTime" ng-click="silence()">{{ remainingTime }}</div><button class="btn btn-default" ng-click="next()">Next</button>')}])}(),function(t){try{t=angular.module("cast")}catch(e){t=angular.module("cast",[])}t.run(["$templateCache",function(t){t.put("partials/settings.html",'<h1>Settings</h1><form class="form-horizontal"><div class="form-group"><label for="players" class="col-sm-2 control-label">Number of players</label><div class="col-sm-10"><input type="number" class="form-control" id="players" ng-model="settings.players" min="2"></div></div><div class="form-group"><label for="length" class="col-sm-2 control-label">Length of turn (minutes)</label><div class="col-sm-10"><input type="number" class="form-control" id="length" ng-model="settings.length" min="0"></div></div><div class="form-group"><label for="sound" class="col-sm-2 control-label">Sound</label><div class="col-sm-10"><input type="checkbox" class="form-control" id="sound" ng-model="settings.sound"></div></div><div class="form-group" ng-repeat="x in range(settings.players) track by $index"><label for="player-{{ $index }}" class="col-sm-2 control-label">Player {{ $index + 1 }} name</label><div class="col-sm-10"><input type="text" class="form-control" id="player-{{ $index }}" placeholder="Player {{ $index + 1 }}" ng-model="settings.names[$index]"></div></div></form>')}])}();
//# sourceMappingURL=scripts/main-c3c41093.js.map