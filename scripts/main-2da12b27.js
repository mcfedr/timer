angular.module("timer",["ngAnimate","ngTouch","ngStorage","ui.router","ngFitText"]).config(["$stateProvider","$urlRouterProvider",function(t,n){n.otherwise("/play"),t.state("play",{url:"/play",templateUrl:"partials/play.html",controller:"play"}).state("settings",{url:"/settings",templateUrl:"partials/settings.html",controller:"settings"})}]),angular.module("timer").controller("play",["$scope","settings","$timeout",function(t,n,e){function l(){t.stop(),i=e(s,10)}function s(){var l=moment(t.settings.endTime);l.isBefore()?(t.remainingTime="Finished!",t.settings.endTime=null,i=null,r&&n.sound&&o.play()):(t.remainingTime=S(Math.floor(moment.duration(l.diff(moment())).as("minutes"))).padLeft(2,"0").s+":"+S(moment.duration(l.diff(moment())).get("seconds")).padLeft(2,"0").s+":"+S(moment.duration(l.diff(moment())).get("milliseconds")).padLeft(3,"0").s,i=e(s,10))}var i,r=!1,o=new buzz.sound("/sounds/alarm.mp3");t.settings=n,t.range=function(t){return new Array(t)},t.next=function(){t.start((t.settings.currentPlayer+1)%t.settings.players)},t.start=function(n){t.settings.currentPlayer=n,t.settings.endTime=moment().add("minutes",t.settings.length),r=!0,l()},t.silence=function(){o.stop()},t.stop=function(){i&&e.cancel(i),t.remainingTime="Stopped",t.silence()},t.settings.endTime?l():t.remainingTime="Stopped"}]),angular.module("timer").controller("settings",["$scope","settings",function(t,n){t.settings=n,t.range=function(t){return new Array(t)}}]),angular.module("timer").factory("settings",["$localStorage",function(t){return t.$default({length:3,players:6,names:[],currentPlayer:0,sound:!0})}]),function(t){try{t=angular.module("timer")}catch(n){t=angular.module("timer",[])}t.run(["$templateCache",function(t){t.put("partials/play.html",'<div class="btn-group btn-group-justified btn-group-lg"><div class="btn-group btn-group-lg" ng-repeat="x in range(settings.players) track by $index"><button type="button" class="btn btn-default" ng-class="{active: settings.currentPlayer == $index}" ng-click="start($index)">{{ settings.names[$index] || "Player " + ($index + 1) }}</button></div></div><div fittext="0.5" class="remainingTime" ng-click="silence()">{{ remainingTime }}</div><div class="btn-group btn-group-justified btn-group-lg"><div class="btn-group btn-group-lg"><button class="btn btn-default" ng-click="next()">Next</button></div><div class="btn-group btn-group-lg"><button class="btn btn-default" ng-click="stop()">Stop</button></div></div>')}])}(),function(t){try{t=angular.module("timer")}catch(n){t=angular.module("timer",[])}t.run(["$templateCache",function(t){t.put("partials/settings.html",'<h1>Settings</h1><form class="form-horizontal"><div class="form-group"><label for="players" class="col-sm-2 control-label">Number of players</label><div class="col-sm-10"><input type="number" class="form-control" id="players" ng-model="settings.players" min="2"></div></div><div class="form-group"><label for="length" class="col-sm-2 control-label">Length of turn (minutes)</label><div class="col-sm-10"><input type="number" class="form-control" id="length" ng-model="settings.length" min="0"></div></div><div class="form-group"><label for="sound" class="col-sm-2 control-label">Sound</label><div class="col-sm-10"><input type="checkbox" class="form-control" id="sound" ng-model="settings.sound"></div></div><div class="form-group" ng-repeat="x in range(settings.players) track by $index"><label for="player-{{ $index }}" class="col-sm-2 control-label">Player {{ $index + 1 }} name</label><div class="col-sm-10"><input type="text" class="form-control" id="player-{{ $index }}" placeholder="Player {{ $index + 1 }}" ng-model="settings.names[$index]"></div></div></form>')}])}();
//# sourceMappingURL=scripts/main-2da12b27.js.map